<!DOCTYPE html>
<html>
	<head>
	<meta charset="utf-8">
		<link rel="shortcut icon" href="NdcLogo4848.ico" type="image/x-icon">
        <meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Vial (Ndc) 虚拟股票系统</title>
		<link rel="stylesheet" type="text/css" href="index_style.css">
		<script type="text/javascript" src="echarts.js"></script>
		<script type="text/javascript" src="Data_Update.js"></script>
        
		<ul class="gray">
			<li class="av"><img src="NdcLogo4848.ico"></li>
  			<li class="s"><a>Vial 虚拟股票系统</a></li>
  			<li class="av"><a href="index.html">主页</a></li>
  			<li class="av"><a href="news.html">新闻</a></li>
  			<li class="av"><a href="mygp.html">我的股票</a></li>
  			<li class="av acc"><a href="buy.html">购买股票</a></li>
  			<li class="av"><a href="upld.html">充值</a></li>
			<li class="av"><a href="chnm.html">更改账户名</a></li>
			<li class="av"><a href="cpcq.html">抽奖</a></li>
  			<li class="rightli av"><a href="https://space.bilibili.com/3461576468203796">Vial频道出品</a></li>
  			<li class="rightli s"><a id="cnt"></a></li>
		</ul>
		<style>
        #echarts{
            display: flex;
            flex-wrap:wrap;
            width: 100%;
            justify-content:space-around;
        }
        #first{
            width: 48%;
            height: 600px;
            display: inline-block; 
            box-shadow: 1px 1px 10px #888888;
            border-radius: 30px;   
            margin-top: 20px;
        }
        #second{
            width: 48%;
            height: 600px;
            display: inline-block;  
            border-radius: 30px;   
            box-shadow: 1px 1px 10px #888888;  
            margin-top: 20px;
        }
        #first1{
            width: 100%;
            height: 600px;
            display: inline-block; 
            box-shadow: 1px 1px 10px #888888;
            border-radius: 30px;   
            margin-top: 20px;
        }
        @media screen and (max-width:957px){
            #first{
                width: 957px;
            }
            #second{
                width: 957px;
            }
        }
    </style>
	</head>
	<body>
		<script type="text/javascript">
			if(typeof(Storage)!=="undefined")
        	{
        	    if(isNaN(Number(localStorage.money)))
    			{
    				localStorage.money=0;
    			}
    			if(isNaN(Number(localStorage.sel1)))
    			{
    				localStorage.sel1=0;
    			}
    			if(isNaN(Number(localStorage.buy1)))
    			{
    				localStorage.buy1=0;
    			}
    			if(isNaN(Number(localStorage.sel2)))
    			{
    				localStorage.sel2=0;
    			}
    			if(isNaN(Number(localStorage.buy2)))
    			{
    				localStorage.buy2=0;
    			}
    			if(isNaN(Number(localStorage.sel3)))
    			{
    				localStorage.sel3=0;
    			}
    			if(isNaN(Number(localStorage.buy3)))
    			{
    				localStorage.buy3=0;
    			}
    			if(isNaN(Number(localStorage.nn)))
    			{
    				localStorage.nn=1;
    			}
    			if(Number(localStorage.nn)==1&&Number(localStorage.money)==0)
    			{
    				localStorage.name="新用户"+Math.floor(Math.random()*(100000-0+1));
    				localStorage.nn=0;
    			}
        	    let nnn=Number(localStorage.money);
        	    document.addEventListener("DOMContentLoaded", function(){
        	        document.getElementById("cnt").innerText = "你好，"+localStorage.name+"。您还剩余约 " + nnn.toFixed(2) + " Orgent币。";
        	        document.getElementById("cnt1").innerText = "您的Ndc ID当前还剩余 " + nnn.toFixed(2) + " Orgent币。";
        	    });
        	}
        	else
        	{
        	    document.addEventListener("DOMContentLoaded", function() {
        	        alert("您的设备可能不支持 localStorge，暂时无法正常使用 Ndc股票系统。")
        	    });
        	}
		</script>
		<h1>购买股票</h1>
		<h2 id="cnt1"></h2>
		<div id="echarts">
		<div id="first"></div>
		<div id="second"></div>
    <script>
        window.onresize = function() {
            myChart1.resize();
            myChart.resize();
        };
        var chartDom = document.getElementById('first');
        var myChart = echarts.init(chartDom);
        var option;
        load_data();
        option = {
        	title: {
        		text: '市场份额'
        	},
        tooltip: {
            trigger: 'item'
        },
        legend: {
            top: '8%',
            left: 'center'
        },
        series: [
            {
            name: '市场份额',
            type: 'pie',
            radius: ['40%', '70%'],
            avoidLabelOverlap: false,
            itemStyle: {
                borderRadius: 10,
                borderColor: '#fff',
                borderWidth: 2
            },
            label: {
                show: false,
                position: 'center'
            },
            emphasis: {
                label: {
                show: true,
                fontSize: '40',
                fontWeight: 'bold'
                }
            },
            labelLine: {
                show: false
            },
            data: [
                { value: utw, name: 'Utw' },
                { value: vial, name: 'Vial' },
                { value: cwmm, name: 'CWMM' },
				{ value: fivu, name: '5U' },
				{ value: chy, name: 'Chy' },
                { value: ecc, name: 'ECC' },
				{ value: lemon, name: 'Lemon实验室' }
            ]
            }
        ]
        };
        option && myChart.setOption(option);
        var chartDom = document.getElementById('second');
        var myChart1 = echarts.init(chartDom);
        var option = makeop();
        option && myChart1.setOption(option);
        function updateChart() {
            if (myChart1) {
                const option = makeop();
                myChart1.setOption(option);
            }
        }
        startRealTimeUpdate();
    </script>
</div>
<p>&nbsp;</p>
<p>编号：1.AWM &nbsp; 2.Utw &nbsp; 3.Vial &nbsp; 4.CWMM &nbsp; 5.YMCM(YM) &nbsp; 6.Chy &nbsp; 7.UPTC(PTC) &nbsp; 8.5U &nbsp; 9.3L &nbsp; 10.ECC</p>
	<center><div class="form-control">
    		<input type="value" required="" id="code1">
    		<label>
        		<span style="transition-delay:0ms">要</span><span style="transition-delay:50ms">购</span><span style="transition-delay:100ms">买</span><span style="transition-delay:150ms">的</span><span style="transition-delay:200ms">股</span><span style="transition-delay:250ms">票</span><span style="transition-delay:300ms">编</span><span style="transition-delay:350ms">号</span>
    		</label>
		</div>
		<div class="form-control">
    		<input type="value" required="" id="money1">
    		<label>
        		<span style="transition-delay:0ms">要</span><span style="transition-delay:50ms">购</span><span style="transition-delay:100ms">买</span><span style="transition-delay:150ms">的</span><span style="transition-delay:200ms">股</span><span style="transition-delay:250ms">票</span><span style="transition-delay:300ms">钱</span><span style="transition-delay:350ms">数</span>
    		</label>
		</div>
		<script>
			function Check()
			{
				var iid=document.getElementById("code1").value;
				var mmy=document.getElementById("money1").value;
				if(iid<=0||iid>10)
				{
					alert("编号无效。");
				}
				else if(mmy<=0)
				{
					alert("你不可以投资负数或零Orgent币。");
				}
				else if(mmy>Number(localStorage.money))
				{
					alert("余额不足。请充值。");
				}
				else
				{
					if(!confirm("确定要购买股票 " + buycheckname(iid) + " 共 " + mmy + " Orgent币吗？")) return;
					if(Number(iid)==Number(localStorage.nq))
					{
						alert("不能连续购买同一股票。");
					}
					else if(Number(localStorage.sel1)==0)
					{
						localStorage.sel1=Number(iid);
						localStorage.buy1=Number(mmy);
						localStorage.p1=Number(buychecknowprice(iid));
						localStorage.d1=Number(Date.now());
						localStorage.money=Number(localStorage.money)-Number(mmy);
						localStorage.nq=Number(iid);
						alert("操作成功完成。");
						window.location.href="mygp.html";
					}
					else if(Number(localStorage.sel2)==0)
					{
						localStorage.sel2=Number(iid);
						localStorage.buy2=Number(mmy);
						localStorage.p2=Number(buychecknowprice(iid));
						localStorage.d2=Number(Date.now());
						localStorage.money=Number(localStorage.money)-Number(mmy);
						localStorage.nq=Number(iid);
						alert("操作成功完成。");
						window.location.href="mygp.html";
					}
					else if(Number(localStorage.sel3)==0)
					{
						localStorage.sel3=Number(iid);
						localStorage.buy3=Number(mmy);
						localStorage.d3=Number(Date.now());
						localStorage.p3=Number(buychecknowprice(iid));
						localStorage.money=Number(localStorage.money)-Number(mmy);
						localStorage.nq=Number(iid);
						alert("操作成功完成。");
						window.location.href="mygp.html";
					}
					else
					{
						alert("股票过多。你只能购买三个股票。请卖出一些。");
					}
				}
			}
		</script>
		<button class="btn" onclick="javascript:Check()">购买</button></center>
	</body>

</html>


















